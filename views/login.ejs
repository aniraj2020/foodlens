<h4>Login</h4>

<form id="loginForm" action="/login" method="POST">
  <div class="input-field">
    <input type="text" name="username" id="username" required />
    <label for="username">Username</label>
  </div>

  <div class="input-field">
    <input type="password" name="password" id="password" required />
    <label for="password">Password</label>
  </div>

  <button type="submit" class="btn">Login</button>
</form>

<p>Don't have an account? <a href="/register">Register</a></p>

<!-- Show login error (if any) -->
<% if (typeof error !== 'undefined' && error) { %>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      M.toast({
        html: "<%= error %>",
        classes: "rounded red lighten-1 white-text",
        displayLength: 3000
      });
    });
  </script>
<% } %>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    M.updateTextFields();

    document.getElementById("loginForm").addEventListener("submit", function (e) {
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!username || !password) {
        e.preventDefault();
        M.toast({
          html: "Please enter both username and password.",
          classes: "rounded red lighten-1 white-text"
        });
      }
    });
  });
</script>
